(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{1114:function(e,t,r){Promise.resolve().then(r.bind(r,2426))},4938:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},3113:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},8335:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8893:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8930:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6865:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7689:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2426:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),i=r(2265),s=r(9397),n=r(8893),l=r(8930),o=r(4938),c=r(8614),d=r(521),u=r(9064),p=r(2753),m=r(860);function x(){let[e,t]=(0,i.useState)([]),[r,x]=(0,i.useState)(!0),[h,f]=(0,i.useState)(!1),[y,g]=(0,i.useState)(!1),[b,v]=(0,i.useState)(null),[j,k]=(0,i.useState)(null),[w,N]=(0,i.useState)({title:"",subtitle:"",imageUrl:"",link:"/books",active:!0,order:0}),Z=async()=>{x(!0);try{let e=await fetch("/api/admin/ads"),r=await e.json();r.success&&t(r.data)}catch(e){u.ZP.error("Promotion synchronization failed")}finally{x(!1)}};(0,i.useEffect)(()=>{Z()},[]);let C=async e=>{e.preventDefault();let t=j?{...w,id:j._id}:w,r=u.ZP.loading(j?"Reconfiguring promotion...":"Launching new advertisement...");try{let e=await fetch("/api/admin/ads",{method:j?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});(await e.json()).success?(u.ZP.success(j?"Advertisement reconfigured":"New promotion launched successfully",{id:r}),f(!1),k(null),N({title:"",subtitle:"",imageUrl:"",link:"/books",active:!0,order:0}),Z()):u.ZP.error("Process failed. Verify creative assets.",{id:r})}catch(e){u.ZP.error("Institutional uplink error",{id:r})}},P=async e=>{let t=u.ZP.loading("Expunging promotion record...");try{let r=await fetch("/api/admin/ads?id=".concat(e),{method:"DELETE"});(await r.json()).success?(u.ZP.success("Promotion record expunged",{id:t}),Z()):u.ZP.error("Deletion request denied",{id:t})}catch(e){u.ZP.error("Critical system error during deletion",{id:t})}},M=e=>{v(e),g(!0)},E=e=>{k(e),N({title:e.title,subtitle:e.subtitle||"",imageUrl:e.imageUrl,link:e.link||"/books",active:e.active,order:e.order||0}),f(!0)};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Ads Management"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Manage hero banners and homepage promotions."})]}),(0,a.jsxs)("button",{onClick:()=>{k(null),N({title:"",subtitle:"",imageUrl:"",link:"/books",active:!0,order:e.length}),f(!0)},className:"bg-primary text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-primary/90 transition-all",children:[(0,a.jsx)(s.Z,{className:"h-5 w-5"})," Add New Ad"]})]}),r?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary/20 border-t-primary"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-primary-dark",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm hover:shadow-md transition-all group",children:[(0,a.jsxs)("div",{className:"relative h-48",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"}),(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>E(e),className:"p-2 bg-white/90 backdrop-blur shadow-sm rounded-lg text-primary hover:bg-white transition-all",children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>M(e),className:"p-2 bg-white/90 backdrop-blur shadow-sm rounded-lg text-red-500 hover:bg-white transition-all",children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})]}),!e.active&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-[2px] flex items-center justify-center",children:(0,a.jsx)("span",{className:"bg-red-500 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:"Inactive"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-bold truncate",children:e.title}),(0,a.jsxs)("span",{className:"text-[10px] font-black uppercase text-primary/30 tracking-widest",children:["Order: ",e.order]})]}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mb-4 line-clamp-1",children:e.subtitle||"No subtitle provided"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-primary font-bold text-xs uppercase tracking-widest",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3"})," ",e.link]})]})]},e._id))}),(0,a.jsx)(p.Z,{isOpen:y,onClose:()=>g(!1),onConfirm:()=>P(null==b?void 0:b._id),title:"Expunge Promotion",message:'Are you sure you want to permanently delete the advertisement "'.concat(null==b?void 0:b.title,'"? This creative asset will be removed from all display zones.')}),(0,a.jsx)(c.M,{children:h&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(!1),className:"absolute inset-0 bg-primary-dark/60 backdrop-blur-sm"}),(0,a.jsxs)(d.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-3xl p-8 w-full max-w-lg relative z-10 shadow-2xl",children:[(0,a.jsx)("h2",{className:"text-2xl font-black text-primary-dark mb-6",children:j?"Edit Ad":"New Ad"}),(0,a.jsxs)("form",{onSubmit:C,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-black uppercase tracking-widest text-primary/40 mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",required:!0,value:w.title,onChange:e=>N({...w,title:e.target.value}),className:"w-full bg-primary/5 border border-primary/10 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Main headline"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-black uppercase tracking-widest text-primary/40 mb-2",children:"Subtitle"}),(0,a.jsx)("input",{type:"text",value:w.subtitle,onChange:e=>N({...w,subtitle:e.target.value}),className:"w-full bg-primary/5 border border-primary/10 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Small text below title"})]}),(0,a.jsx)(m.Z,{label:"Promotion Creative",value:w.imageUrl,onChange:e=>N({...w,imageUrl:e})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-black uppercase tracking-widest text-primary/40 mb-2",children:"Link"}),(0,a.jsx)("input",{type:"text",value:w.link,onChange:e=>N({...w,link:e.target.value}),className:"w-full bg-primary/5 border border-primary/10 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-black uppercase tracking-widest text-primary/40 mb-2",children:"Order"}),(0,a.jsx)("input",{type:"number",value:w.order,onChange:e=>N({...w,order:parseInt(e.target.value)}),className:"w-full bg-primary/5 border border-primary/10 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/20"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"activeAd",checked:w.active,onChange:e=>N({...w,active:e.target.checked}),className:"w-4 h-4 rounded text-primary focus:ring-primary/20"}),(0,a.jsx)("label",{htmlFor:"activeAd",className:"text-sm font-bold text-primary-dark",children:"Active Banner"})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-6 py-3 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 px-6 py-3 bg-primary text-white rounded-xl font-bold hover:bg-primary/90 shadow-lg shadow-primary/20",children:"Save Changes"})]})]})]})]})})]})}},2753:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(7437),i=r(8614),s=r(521),n=r(2489),l=r(6865);function o(e){let{isOpen:t,onClose:r,onConfirm:o,title:c,message:d,confirmText:u="Confirm",cancelText:p="Cancel",type:m="danger"}=e;return t?(0,a.jsx)(i.M,{children:(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,a.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-primary-dark/60 backdrop-blur-sm"}),(0,a.jsxs)(s.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-3xl p-8 w-full max-w-md relative z-10 shadow-2xl border border-primary/5",children:[(0,a.jsx)("button",{onClick:r,className:"absolute right-6 top-6 p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400",children:(0,a.jsx)(n.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"p-4 rounded-2xl mb-6 ".concat("danger"===m?"bg-red-50 text-red-500":"bg-primary/5 text-primary"),children:(0,a.jsx)(l.Z,{className:"h-8 w-8"})}),(0,a.jsx)("h2",{className:"text-2xl font-black text-primary-dark mb-2 tracking-tight",children:c}),(0,a.jsx)("p",{className:"text-primary/60 font-medium text-sm leading-relaxed mb-8",children:d}),(0,a.jsxs)("div",{className:"flex gap-4 w-full",children:[(0,a.jsx)("button",{onClick:r,className:"flex-1 px-6 py-4 bg-gray-50 text-primary-dark/40 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-gray-100 transition-all border border-primary/5",children:p}),(0,a.jsx)("button",{onClick:()=>{o(),r()},className:"flex-1 px-6 py-4 rounded-2xl font-black text-xs uppercase tracking-widest text-white transition-all shadow-xl shadow-current/20 ".concat("danger"===m?"bg-red-500 hover:bg-red-600":"bg-primary hover:bg-primary-dark"),children:u})]})]})]})]})}):null}},860:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(7437),i=r(2265),s=r(8335),n=r(1817),l=r(7689),o=r(2489),c=r(3113),d=r(9064);function u(e){let{value:t,onChange:r,label:u="Image Selection"}=e,[p,m]=(0,i.useState)(!1),[x,h]=(0,i.useState)("url"),f=(0,i.useRef)(null),y=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!a.type.startsWith("image/")){d.ZP.error("Please upload an image file");return}if(a.size>5242880){d.ZP.error("File size exceeds 5MB limit");return}m(!0);let i=new FormData;i.append("file",a);try{let e=await fetch("/api/admin/upload",{method:"POST",body:i}),t=await e.json();t.success?(r(t.url),d.ZP.success("Image uploaded successfully")):d.ZP.error(t.message||"Upload failed")}catch(e){d.ZP.error("System error during upload"),console.error(e)}finally{m(!1)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40",children:u}),(0,a.jsxs)("div",{className:"flex bg-primary/5 p-1 rounded-lg",children:[(0,a.jsx)("button",{type:"button",onClick:()=>h("url"),className:"px-3 py-1 text-[10px] font-black uppercase tracking-tighter rounded-md transition-all ".concat("url"===x?"bg-white text-primary shadow-sm":"text-primary/40 hover:text-primary"),children:"URL Link"}),(0,a.jsx)("button",{type:"button",onClick:()=>h("upload"),className:"px-3 py-1 text-[10px] font-black uppercase tracking-tighter rounded-md transition-all ".concat("upload"===x?"bg-white text-primary shadow-sm":"text-primary/40 hover:text-primary"),children:"Local File"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-2 space-y-4",children:"url"===x?(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(s.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-primary/30 group-focus-within:text-primary transition-colors"}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Paste institutional image URL...",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl pl-12 pr-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-bold text-primary-dark transition-all"})]}):(0,a.jsxs)("div",{onClick:()=>{var e;return!p&&(null===(e=f.current)||void 0===e?void 0:e.click())},className:"border-2 border-dashed border-primary/10 rounded-2xl p-8 flex flex-col items-center justify-center cursor-pointer hover:border-primary/30 hover:bg-primary/5 transition-all group ".concat(p?"opacity-50 pointer-events-none":""),children:[(0,a.jsx)("input",{type:"file",ref:f,onChange:y,className:"hidden",accept:"image/*"}),p?(0,a.jsx)(n.Z,{className:"h-10 w-10 text-primary animate-spin mb-4"}):(0,a.jsx)(l.Z,{className:"h-10 w-10 text-primary/20 group-hover:text-primary/40 transition-colors mb-4"}),(0,a.jsx)("p",{className:"text-xs font-black uppercase tracking-widest text-primary/40 group-hover:text-primary/60 transition-colors",children:p?"Uploading Resource...":"Select Local Image"}),(0,a.jsx)("p",{className:"text-[10px] font-medium text-primary/20 mt-2",children:"Maximum file size: 5MB"})]})}),(0,a.jsx)("div",{className:"relative aspect-video md:aspect-square bg-primary/5 rounded-2xl overflow-hidden border border-primary/10 flex items-center justify-center group",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:t,alt:"Preview",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-primary-dark/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>r(""),className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600 shadow-xl",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center opacity-10",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 mb-2"}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"No Preview Available"})]})})]})]})}},8614:function(e,t,r){"use strict";r.d(t,{M:function(){return y}});var a=r(7437),i=r(2265),s=r(8881),n=r(3576),l=r(4252),o=r(4664);class c extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:r}=e,s=(0,i.useId)(),n=(0,i.useRef)(null),l=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,i.useContext)(o._);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:i}=l.current;if(r||!n.current||!e||!t)return;n.current.dataset.motionPopId=s;let o=document.createElement("style");return d&&(o.nonce=d),document.head.appendChild(o),o.sheet&&o.sheet.insertRule('\n          [data-motion-pop-id="'.concat(s,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(a,"px !important;\n            left: ").concat(i,"px !important;\n          }\n        ")),()=>{document.head.removeChild(o)}},[r]),(0,a.jsx)(c,{isPresent:r,childRef:n,sizeRef:l,children:i.cloneElement(t,{ref:n})})}let u=e=>{let{children:t,initial:r,isPresent:s,onExitComplete:o,custom:c,presenceAffectsLayout:u,mode:m}=e,x=(0,n.h)(p),h=(0,i.useId)(),f=(0,i.useCallback)(e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;o&&o()},[x,o]),y=(0,i.useMemo)(()=>({id:h,initial:r,isPresent:s,custom:c,onExitComplete:f,register:e=>(x.set(e,!1),()=>x.delete(e))}),u?[Math.random(),f]:[s,f]);return(0,i.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[s]),i.useEffect(()=>{s||x.size||!o||o()},[s]),"popLayout"===m&&(t=(0,a.jsx)(d,{isPresent:s,children:t})),(0,a.jsx)(l.O.Provider,{value:y,children:t})};function p(){return new Map}var m=r(9637);let x=e=>e.key||"";function h(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var f=r(1534);let y=e=>{let{children:t,custom:r,initial:l=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:p=!1}=e,[y,g]=(0,m.oO)(p),b=(0,i.useMemo)(()=>h(t),[t]),v=p&&!y?[]:b.map(x),j=(0,i.useRef)(!0),k=(0,i.useRef)(b),w=(0,n.h)(()=>new Map),[N,Z]=(0,i.useState)(b),[C,P]=(0,i.useState)(b);(0,f.L)(()=>{j.current=!1,k.current=b;for(let e=0;e<C.length;e++){let t=x(C[e]);v.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[C,v.length,v.join("-")]);let M=[];if(b!==N){let e=[...b];for(let t=0;t<C.length;t++){let r=C[t],a=x(r);v.includes(a)||(e.splice(t,0,r),M.push(r))}"wait"===d&&M.length&&(e=M),P(h(e)),Z(b);return}let{forceRender:E}=(0,i.useContext)(s.p);return(0,a.jsx)(a.Fragment,{children:C.map(e=>{let t=x(e),i=(!p||!!y)&&(b===C||v.includes(t));return(0,a.jsx)(u,{isPresent:i,initial:(!j.current||!!l)&&void 0,custom:i?void 0:r,presenceAffectsLayout:c,mode:d,onExitComplete:i?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==E||E(),P(k.current),p&&(null==g||g()),o&&o())},children:e},t)})})}}},function(e){e.O(0,[521,765,971,117,744],function(){return e(e.s=1114)}),_N_E=e.O()}]);