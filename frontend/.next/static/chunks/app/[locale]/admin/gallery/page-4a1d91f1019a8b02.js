(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{1745:function(e,t,r){Promise.resolve().then(r.bind(r,4788))},4788:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),s=r(2265),i=r(9397),l=r(8893),n=r(8930),c=r(1047),o=r(2720),d=r(8614),p=r(521),m=r(9064);r(2753);var x=r(860);function u(){let[e,t]=(0,s.useState)([]),[r,u]=(0,s.useState)(!0),[h,g]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null),[j,N]=(0,s.useState)(null),[w,k]=(0,s.useState)({title:"",description:"",imageUrl:"",date:new Date().toISOString().split("T")[0],category:"Event"}),C=async()=>{u(!0);try{let e=await fetch("/api/admin/gallery"),r=await e.json();r.success&&t(r.data)}catch(e){m.ZP.error("Failed to archive institutional records")}finally{u(!1)}};(0,s.useEffect)(()=>{C()},[]);let S=async e=>{e.preventDefault();let t=j?{...w,id:j._id}:w,r=m.ZP.loading(j?"Archiving revisions...":"Capturing new record...");try{let e=await fetch("/api/admin/gallery",{method:j?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});(await e.json()).success?(m.ZP.success(j?"Record archived successfully":"Event captured and registered",{id:r}),g(!1),N(null),k({title:"",description:"",imageUrl:"",date:new Date().toISOString().split("T")[0],category:"Institutional"}),C()):m.ZP.error("Process failed. Please verify metadata.",{id:r})}catch(e){m.ZP.error("Network communication failure",{id:r})}},Z=e=>{v(e),b(!0)},P=e=>{N(e),k({title:e.title,description:e.description||"",imageUrl:e.imageUrl,date:new Date(e.date).toISOString().split("T")[0],category:e.category||"Institutional"}),g(!0)};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Gallery Management"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Manage institutional events and photo records."})]}),(0,a.jsxs)("button",{onClick:()=>{N(null),k({title:"",description:"",imageUrl:"",date:new Date().toISOString().split("T")[0],category:"Event"}),g(!0)},className:"bg-primary text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-primary/90 transition-all",children:[(0,a.jsx)(i.Z,{className:"h-5 w-5"})," Add New Event"]})]}),r?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary/20 border-t-primary"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-primary-dark",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm hover:shadow-md transition-all group",children:[(0,a.jsxs)("div",{className:"relative h-48",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"}),(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>P(e),className:"p-2 bg-white/90 backdrop-blur shadow-sm rounded-lg text-primary hover:bg-white transition-all",children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>Z(e),className:"p-2 bg-white/90 backdrop-blur shadow-sm rounded-lg text-red-500 hover:bg-white transition-all",children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,a.jsx)("span",{className:"bg-primary text-white text-[8px] font-black uppercase tracking-[0.2em] px-3 py-1 rounded-full shadow-lg",children:e.category})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2 truncate",children:e.title}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-primary/40 text-[10px] font-black uppercase tracking-widest border-t border-primary/5 pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3"})," ",new Date(e.date).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 ml-auto",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3"})," ",e.category]})]})]})]},e._id))}),(0,a.jsx)(d.M,{children:h&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>g(!1),className:"absolute inset-0 bg-primary-dark/60 backdrop-blur-sm"}),(0,a.jsxs)(p.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-3xl p-8 w-full max-w-lg relative z-10 shadow-2xl",children:[(0,a.jsx)("h2",{className:"text-2xl font-black text-primary-dark mb-6",children:j?"Edit Event":"New Event"}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-black uppercase tracking-widest text-primary/40 mb-2",children:"Event Title"}),(0,a.jsx)("input",{type:"text",required:!0,value:w.title,onChange:e=>k({...w,title:e.target.value}),className:"w-full bg-primary/5 border border-primary/10 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Name of the record/event"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-black uppercase tracking-widest text-primary/40 mb-2",children:"Date"}),(0,a.jsx)("input",{type:"date",required:!0,value:w.date,onChange:e=>k({...w,date:e.target.value}),className:"w-full bg-primary/5 border border-primary/10 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-black uppercase tracking-widest text-primary/40 mb-2",children:"Category"}),(0,a.jsxs)("select",{value:w.category,onChange:e=>k({...w,category:e.target.value}),className:"w-full bg-primary/5 border border-primary/10 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/20",children:[(0,a.jsx)("option",{value:"Event",children:"Event"}),(0,a.jsx)("option",{value:"Institution",children:"Institution"}),(0,a.jsx)("option",{value:"Scholars",children:"Scholars"}),(0,a.jsx)("option",{value:"Workshop",children:"Workshop"})]})]})]}),(0,a.jsx)(x.Z,{label:"Event Photo",value:w.imageUrl,onChange:e=>k({...w,imageUrl:e})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-black uppercase tracking-widest text-primary/40 mb-2",children:"Description"}),(0,a.jsx)("textarea",{rows:3,value:w.description,onChange:e=>k({...w,description:e.target.value}),className:"w-full bg-primary/5 border border-primary/10 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/20 resize-none",placeholder:"Brief details about the event..."})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-6 py-3 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 px-6 py-3 bg-primary text-white rounded-xl font-bold hover:bg-primary/90 shadow-lg shadow-primary/20",children:"Save Record"})]})]})]})]})})]})}},2753:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a=r(7437),s=r(8614),i=r(521),l=r(2489),n=r(6865);function c(e){let{isOpen:t,onClose:r,onConfirm:c,title:o,message:d,confirmText:p="Confirm",cancelText:m="Cancel",type:x="danger"}=e;return t?(0,a.jsx)(s.M,{children:(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,a.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-primary-dark/60 backdrop-blur-sm"}),(0,a.jsxs)(i.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-3xl p-8 w-full max-w-md relative z-10 shadow-2xl border border-primary/5",children:[(0,a.jsx)("button",{onClick:r,className:"absolute right-6 top-6 p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400",children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"p-4 rounded-2xl mb-6 ".concat("danger"===x?"bg-red-50 text-red-500":"bg-primary/5 text-primary"),children:(0,a.jsx)(n.Z,{className:"h-8 w-8"})}),(0,a.jsx)("h2",{className:"text-2xl font-black text-primary-dark mb-2 tracking-tight",children:o}),(0,a.jsx)("p",{className:"text-primary/60 font-medium text-sm leading-relaxed mb-8",children:d}),(0,a.jsxs)("div",{className:"flex gap-4 w-full",children:[(0,a.jsx)("button",{onClick:r,className:"flex-1 px-6 py-4 bg-gray-50 text-primary-dark/40 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-gray-100 transition-all border border-primary/5",children:m}),(0,a.jsx)("button",{onClick:()=>{c(),r()},className:"flex-1 px-6 py-4 rounded-2xl font-black text-xs uppercase tracking-widest text-white transition-all shadow-xl shadow-current/20 ".concat("danger"===x?"bg-red-500 hover:bg-red-600":"bg-primary hover:bg-primary-dark"),children:p})]})]})]})]})}):null}},860:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var a=r(7437),s=r(2265),i=r(8335),l=r(1817),n=r(7689),c=r(2489),o=r(3113),d=r(9064);function p(e){let{value:t,onChange:r,label:p="Image Selection"}=e,[m,x]=(0,s.useState)(!1),[u,h]=(0,s.useState)("url"),g=(0,s.useRef)(null),y=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!a.type.startsWith("image/")){d.ZP.error("Please upload an image file");return}if(a.size>5242880){d.ZP.error("File size exceeds 5MB limit");return}x(!0);let s=new FormData;s.append("file",a);try{let e=await fetch("/api/admin/upload",{method:"POST",body:s}),t=await e.json();t.success?(r(t.url),d.ZP.success("Image uploaded successfully")):d.ZP.error(t.message||"Upload failed")}catch(e){d.ZP.error("System error during upload"),console.error(e)}finally{x(!1)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40",children:p}),(0,a.jsxs)("div",{className:"flex bg-primary/5 p-1 rounded-lg",children:[(0,a.jsx)("button",{type:"button",onClick:()=>h("url"),className:"px-3 py-1 text-[10px] font-black uppercase tracking-tighter rounded-md transition-all ".concat("url"===u?"bg-white text-primary shadow-sm":"text-primary/40 hover:text-primary"),children:"URL Link"}),(0,a.jsx)("button",{type:"button",onClick:()=>h("upload"),className:"px-3 py-1 text-[10px] font-black uppercase tracking-tighter rounded-md transition-all ".concat("upload"===u?"bg-white text-primary shadow-sm":"text-primary/40 hover:text-primary"),children:"Local File"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-2 space-y-4",children:"url"===u?(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(i.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-primary/30 group-focus-within:text-primary transition-colors"}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Paste institutional image URL...",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl pl-12 pr-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-bold text-primary-dark transition-all"})]}):(0,a.jsxs)("div",{onClick:()=>{var e;return!m&&(null===(e=g.current)||void 0===e?void 0:e.click())},className:"border-2 border-dashed border-primary/10 rounded-2xl p-8 flex flex-col items-center justify-center cursor-pointer hover:border-primary/30 hover:bg-primary/5 transition-all group ".concat(m?"opacity-50 pointer-events-none":""),children:[(0,a.jsx)("input",{type:"file",ref:g,onChange:y,className:"hidden",accept:"image/*"}),m?(0,a.jsx)(l.Z,{className:"h-10 w-10 text-primary animate-spin mb-4"}):(0,a.jsx)(n.Z,{className:"h-10 w-10 text-primary/20 group-hover:text-primary/40 transition-colors mb-4"}),(0,a.jsx)("p",{className:"text-xs font-black uppercase tracking-widest text-primary/40 group-hover:text-primary/60 transition-colors",children:m?"Uploading Resource...":"Select Local Image"}),(0,a.jsx)("p",{className:"text-[10px] font-medium text-primary/20 mt-2",children:"Maximum file size: 5MB"})]})}),(0,a.jsx)("div",{className:"relative aspect-video md:aspect-square bg-primary/5 rounded-2xl overflow-hidden border border-primary/10 flex items-center justify-center group",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:t,alt:"Preview",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-primary-dark/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>r(""),className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600 shadow-xl",children:(0,a.jsx)(c.Z,{className:"h-5 w-5"})})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center opacity-10",children:[(0,a.jsx)(o.Z,{className:"h-12 w-12 mb-2"}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"No Preview Available"})]})})]})]})}}},function(e){e.O(0,[521,765,319,971,117,744],function(){return e(e.s=1745)}),_N_E=e.O()}]);