(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{3305:function(e,r,a){Promise.resolve().then(a.bind(a,374))},374:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return b}});var t=a(7437),s=a(2265),i=a(9397),l=a(2369),o=a(5868),c=a(8930),n=a(2489),d=a(5252),p=a(401),x=a(8614),m=a(521),u=a(9064),h=a(2753),y=a(860);function b(){let[e,r]=(0,s.useState)([]),[a,b]=(0,s.useState)(!0),[g,f]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1),[v,N]=(0,s.useState)(null),[w,C]=(0,s.useState)(null),[S,Z]=(0,s.useState)({title:"",author:"",editor:"",description:"",coverImage:"",authorImage:"",authorBio:"",price:0,isBestSeller:!1,whatsappLink:"",category:"General"});(0,s.useEffect)(()=>{P()},[]);let P=async()=>{b(!0);try{let e=await fetch("/api/books"),a=await e.json();a.success&&r(a.data)}catch(e){u.ZP.error("Failed to load catalog")}finally{b(!1)}},B=async e=>{e.preventDefault();let r=w?"/api/books/".concat(w._id):"/api/books",a=u.ZP.loading(w?"Updating repository...":"Adding to catalog...");try{(await fetch(r,{method:w?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).ok?(u.ZP.success(w?"Book updated successfully":"New book added to library",{id:a}),P(),L()):u.ZP.error("Process failed. Please verify data.",{id:a})}catch(e){u.ZP.error("Network synchronization error",{id:a})}},I=async e=>{let r=u.ZP.loading("Removing from repository...");try{(await fetch("/api/books/".concat(e),{method:"DELETE"})).ok?(u.ZP.success("Book removed from catalog",{id:r}),P()):u.ZP.error("Failed to delete record",{id:r})}catch(e){u.ZP.error("Critical deletion error",{id:r})}},E=e=>{N(e),k(!0)},F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(C(e),Z({title:e.title||"",author:e.author||"",editor:e.editor||"",description:e.description||"",coverImage:e.coverImage||"",authorImage:e.authorImage||"",authorBio:e.authorBio||"",price:e.price||0,isBestSeller:e.isBestSeller||!1,whatsappLink:e.whatsappLink||"",category:e.category||"General"})):(C(null),Z({title:"",author:"",editor:"",description:"",coverImage:"",authorImage:"",authorBio:"",price:35,isBestSeller:!1,whatsappLink:"60195328616",category:"General"})),f(!0)},L=()=>{f(!1),C(null)};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-black text-primary-dark",children:"Books Management"}),(0,t.jsx)("p",{className:"text-primary/60 font-medium",children:"Manage your elite book collection and scholarly data."})]}),(0,t.jsxs)("button",{onClick:()=>F(),className:"bg-primary text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-primary/90 transition-all shadow-lg shadow-primary/20",children:[(0,t.jsx)(i.Z,{className:"h-5 w-5"})," Add New Book"]})]}),a?(0,t.jsx)("div",{className:"flex justify-center py-20",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary/20 border-t-primary"})}):(0,t.jsx)("div",{className:"bg-white rounded-3xl border border-primary/5 shadow-xl shadow-primary/5 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-primary/5 border-b border-primary/5",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-5 text-xs font-black uppercase tracking-widest text-primary/40",children:"Book & Author"}),(0,t.jsx)("th",{className:"px-6 py-5 text-xs font-black uppercase tracking-widest text-primary/40",children:"Pricing"}),(0,t.jsx)("th",{className:"px-6 py-5 text-xs font-black uppercase tracking-widest text-primary/40",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-5 text-xs font-black uppercase tracking-widest text-primary/40 text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-primary/5",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-primary/5 transition-colors group",children:[(0,t.jsx)("td",{className:"px-6 py-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-14 w-10 flex-shrink-0 bg-primary/5 rounded-lg overflow-hidden border border-primary/10",children:(0,t.jsx)("img",{src:e.coverImage,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block font-black text-primary-dark group-hover:text-primary transition-colors",children:e.title}),(0,t.jsxs)("span",{className:"text-xs font-bold text-primary/40 uppercase tracking-widest flex items-center gap-1.5 mt-1",children:[(0,t.jsx)(l.Z,{className:"h-3 w-3"})," ",e.author]})]})]})}),(0,t.jsx)("td",{className:"px-6 py-5",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("span",{className:"font-black text-primary-dark text-lg",children:["RM ",e.price||"0"]}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-primary/30",children:"Institutional Price"})]})}),(0,t.jsx)("td",{className:"px-6 py-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"bg-primary/5 text-primary text-[10px] font-black uppercase tracking-widest px-3 py-1 rounded-full border border-primary/10",children:e.category}),e.isBestSeller&&(0,t.jsx)("span",{className:"bg-yellow-500 text-white text-[10px] font-black uppercase tracking-widest px-3 py-1 rounded-full shadow-lg shadow-yellow-500/20",children:"Best Seller"})]})}),(0,t.jsx)("td",{className:"px-6 py-5 text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>F(e),className:"p-3 text-primary hover:bg-primary/10 rounded-xl transition-all",children:(0,t.jsx)(o.Z,{className:"h-5 w-5"})}),(0,t.jsx)("button",{onClick:()=>E(e),className:"p-3 text-red-500 hover:bg-red-50 rounded-xl transition-all",children:(0,t.jsx)(c.Z,{className:"h-5 w-5"})})]})})]},e._id))})]})})}),(0,t.jsx)(h.Z,{isOpen:j,onClose:()=>k(!1),onConfirm:()=>I(null==v?void 0:v._id),title:"Remove from Catalog",message:'Are you sure you want to permanently delete "'.concat(null==v?void 0:v.title,'"? This action is irreversible.')}),(0,t.jsx)(x.M,{children:g&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)(m.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L,className:"absolute inset-0 bg-primary-dark/60 backdrop-blur-sm"}),(0,t.jsxs)(m.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-[2.5rem] w-full max-w-4xl relative z-10 shadow-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-primary-dark p-10 text-white flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-black",children:w?"Scholarly Record":"Register Book"}),(0,t.jsx)("p",{className:"text-white/60 font-medium mt-1",children:"Institutional Publication Management"})]}),(0,t.jsx)("button",{onClick:L,className:"p-3 hover:bg-white/10 rounded-full transition-colors",children:(0,t.jsx)(n.Z,{className:"h-7 w-7"})})]}),(0,t.jsxs)("form",{onSubmit:B,className:"p-10 grid grid-cols-1 md:grid-cols-2 gap-8 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-primary/30 border-b border-primary/5 pb-2",children:"Core Information"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40 mb-2",children:"Book Title"}),(0,t.jsx)("input",{required:!0,placeholder:"The Eternal Message...",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl px-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-bold text-primary-dark",value:S.title,onChange:e=>Z({...S,title:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40 mb-2",children:"Author Name"}),(0,t.jsx)("input",{required:!0,placeholder:"Al-Imam...",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl px-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-bold text-primary-dark",value:S.author,onChange:e=>Z({...S,author:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40 mb-2",children:"Editor (Tahqiq)"}),(0,t.jsx)("input",{placeholder:"Sheikh...",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl px-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-bold text-primary-dark",value:S.editor,onChange:e=>Z({...S,editor:e.target.value})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40 mb-2",children:"Synopsis / Description"}),(0,t.jsx)("textarea",{required:!0,rows:"4",placeholder:"Brief summary of the work...",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl px-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-bold text-primary-dark resize-none",value:S.description,onChange:e=>Z({...S,description:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"space-y-6 text-primary-dark",children:[(0,t.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-primary/30 border-b border-primary/5 pb-2",children:"Catalog & Pricing"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40 mb-2",children:"Price (RM)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-primary"}),(0,t.jsx)("input",{type:"number",required:!0,step:"0.01",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl pl-10 pr-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-black text-primary-dark",value:S.price,onChange:e=>{let r=""===e.target.value?0:parseFloat(e.target.value);Z({...S,price:r})}})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40 mb-2",children:"Category"}),(0,t.jsxs)("select",{className:"w-full bg-primary/5 border border-primary/10 rounded-2xl px-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-black text-primary-dark",value:S.category,onChange:e=>Z({...S,category:e.target.value}),children:[(0,t.jsx)("option",{value:"Fiqh",children:"Fiqh"}),(0,t.jsx)("option",{value:"Hadith",children:"Hadith"}),(0,t.jsx)("option",{value:"History",children:"History"}),(0,t.jsx)("option",{value:"Theology",children:"Theology"}),(0,t.jsx)("option",{value:"General",children:"General"})]})]})]}),(0,t.jsx)(y.Z,{label:"Cover Image",value:S.coverImage,onChange:e=>Z({...S,coverImage:e})}),(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-primary/5 border border-primary/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("input",{type:"checkbox",id:"bestSellerCheck",className:"h-5 w-5 rounded border-primary/10 text-primary focus:ring-primary/20",checked:S.isBestSeller,onChange:e=>Z({...S,isBestSeller:e.target.checked})}),(0,t.jsx)("label",{htmlFor:"bestSellerCheck",className:"font-black text-xs uppercase tracking-widest text-primary-dark",children:"Feature as Best Seller"})]}),(0,t.jsx)("p",{className:"text-[10px] text-primary/40 font-bold leading-relaxed",children:"Featured books appear with a gold badge and are prioritized in search results and homepage sliders."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40 mb-2",children:"WhatsApp Contact (Admin)"}),(0,t.jsx)("input",{required:!0,placeholder:"601136787525",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl px-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-bold text-primary-dark",value:S.whatsappLink,onChange:e=>Z({...S,whatsappLink:e.target.value})})]})]})]}),(0,t.jsxs)("div",{className:"p-10 border-t bg-gray-50 flex justify-end gap-6",children:[(0,t.jsx)("button",{onClick:L,className:"px-8 py-4 bg-red-50 border border-red-200 text-red-600 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-red-100 transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{onClick:B,className:"px-10 py-4 bg-primary text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-primary/90 shadow-2xl shadow-primary/20 transition-all flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"})," ",w?"Submit Update":"Finalize Publication"]})]})]})]})})]})}},2753:function(e,r,a){"use strict";a.d(r,{Z:function(){return c}});var t=a(7437),s=a(8614),i=a(521),l=a(2489),o=a(6865);function c(e){let{isOpen:r,onClose:a,onConfirm:c,title:n,message:d,confirmText:p="Confirm",cancelText:x="Cancel",type:m="danger"}=e;return r?(0,t.jsx)(s.M,{children:(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,t.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-primary-dark/60 backdrop-blur-sm"}),(0,t.jsxs)(i.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-3xl p-8 w-full max-w-md relative z-10 shadow-2xl border border-primary/5",children:[(0,t.jsx)("button",{onClick:a,className:"absolute right-6 top-6 p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400",children:(0,t.jsx)(l.Z,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"p-4 rounded-2xl mb-6 ".concat("danger"===m?"bg-red-50 text-red-500":"bg-primary/5 text-primary"),children:(0,t.jsx)(o.Z,{className:"h-8 w-8"})}),(0,t.jsx)("h2",{className:"text-2xl font-black text-primary-dark mb-2 tracking-tight",children:n}),(0,t.jsx)("p",{className:"text-primary/60 font-medium text-sm leading-relaxed mb-8",children:d}),(0,t.jsxs)("div",{className:"flex gap-4 w-full",children:[(0,t.jsx)("button",{onClick:a,className:"flex-1 px-6 py-4 bg-gray-50 text-primary-dark/40 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-gray-100 transition-all border border-primary/5",children:x}),(0,t.jsx)("button",{onClick:()=>{c(),a()},className:"flex-1 px-6 py-4 rounded-2xl font-black text-xs uppercase tracking-widest text-white transition-all shadow-xl shadow-current/20 ".concat("danger"===m?"bg-red-500 hover:bg-red-600":"bg-primary hover:bg-primary-dark"),children:p})]})]})]})]})}):null}},860:function(e,r,a){"use strict";a.d(r,{Z:function(){return p}});var t=a(7437),s=a(2265),i=a(8335),l=a(1817),o=a(7689),c=a(2489),n=a(3113),d=a(9064);function p(e){let{value:r,onChange:a,label:p="Image Selection"}=e,[x,m]=(0,s.useState)(!1),[u,h]=(0,s.useState)("url"),y=(0,s.useRef)(null),b=async e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!t)return;if(!t.type.startsWith("image/")){d.ZP.error("Please upload an image file");return}if(t.size>5242880){d.ZP.error("File size exceeds 5MB limit");return}m(!0);let s=new FormData;s.append("file",t);try{let e=await fetch("/api/admin/upload",{method:"POST",body:s}),r=await e.json();r.success?(a(r.url),d.ZP.success("Image uploaded successfully")):d.ZP.error(r.message||"Upload failed")}catch(e){d.ZP.error("System error during upload"),console.error(e)}finally{m(!1)}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-primary/40",children:p}),(0,t.jsxs)("div",{className:"flex bg-primary/5 p-1 rounded-lg",children:[(0,t.jsx)("button",{type:"button",onClick:()=>h("url"),className:"px-3 py-1 text-[10px] font-black uppercase tracking-tighter rounded-md transition-all ".concat("url"===u?"bg-white text-primary shadow-sm":"text-primary/40 hover:text-primary"),children:"URL Link"}),(0,t.jsx)("button",{type:"button",onClick:()=>h("upload"),className:"px-3 py-1 text-[10px] font-black uppercase tracking-tighter rounded-md transition-all ".concat("upload"===u?"bg-white text-primary shadow-sm":"text-primary/40 hover:text-primary"),children:"Local File"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"md:col-span-2 space-y-4",children:"url"===u?(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(i.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-primary/30 group-focus-within:text-primary transition-colors"}),(0,t.jsx)("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"Paste institutional image URL...",className:"w-full bg-primary/5 border border-primary/10 rounded-2xl pl-12 pr-5 py-4 focus:outline-none focus:ring-4 focus:ring-primary/10 font-bold text-primary-dark transition-all"})]}):(0,t.jsxs)("div",{onClick:()=>{var e;return!x&&(null===(e=y.current)||void 0===e?void 0:e.click())},className:"border-2 border-dashed border-primary/10 rounded-2xl p-8 flex flex-col items-center justify-center cursor-pointer hover:border-primary/30 hover:bg-primary/5 transition-all group ".concat(x?"opacity-50 pointer-events-none":""),children:[(0,t.jsx)("input",{type:"file",ref:y,onChange:b,className:"hidden",accept:"image/*"}),x?(0,t.jsx)(l.Z,{className:"h-10 w-10 text-primary animate-spin mb-4"}):(0,t.jsx)(o.Z,{className:"h-10 w-10 text-primary/20 group-hover:text-primary/40 transition-colors mb-4"}),(0,t.jsx)("p",{className:"text-xs font-black uppercase tracking-widest text-primary/40 group-hover:text-primary/60 transition-colors",children:x?"Uploading Resource...":"Select Local Image"}),(0,t.jsx)("p",{className:"text-[10px] font-medium text-primary/20 mt-2",children:"Maximum file size: 5MB"})]})}),(0,t.jsx)("div",{className:"relative aspect-video md:aspect-square bg-primary/5 rounded-2xl overflow-hidden border border-primary/10 flex items-center justify-center group",children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:r,alt:"Preview",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-primary-dark/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>a(""),className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600 shadow-xl",children:(0,t.jsx)(c.Z,{className:"h-5 w-5"})})})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center opacity-10",children:[(0,t.jsx)(n.Z,{className:"h-12 w-12 mb-2"}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"No Preview Available"})]})})]})]})}}},function(e){e.O(0,[521,765,599,971,117,744],function(){return e(e.s=3305)}),_N_E=e.O()}]);