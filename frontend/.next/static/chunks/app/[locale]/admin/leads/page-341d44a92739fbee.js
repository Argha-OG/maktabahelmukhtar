(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{5864:function(e,t,s){Promise.resolve().then(s.bind(s,9398))},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9345:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9398:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),r=s(2265),n=s(1817),i=s(3247),l=s(740);let c=(0,s(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var o=s(1671),d=s(8930),u=s(9345),p=s(9064),x=s(8614),h=s(521);function m(){let[e,t]=(0,r.useState)([]),[s,m]=(0,r.useState)(!0),[f,y]=(0,r.useState)(""),[g,j]=(0,r.useState)("all"),b=async()=>{try{let e=await fetch("/api/admin/leads"),s=await e.json();s.success&&t(s.data)}catch(e){p.ZP.error("Failed to fetch leads")}finally{m(!1)}};(0,r.useEffect)(()=>{b()},[]);let w=async(s,a)=>{try{let r=await fetch("/api/admin/leads",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,status:a})});(await r.json()).success&&(t(e.map(e=>e._id===s?{...e,status:a}:e)),p.ZP.success("Lead marked as ".concat(a)))}catch(e){p.ZP.error("Failed to update status")}},v=async s=>{if(confirm("Are you sure you want to delete this lead?"))try{let a=await fetch("/api/admin/leads?id=".concat(s),{method:"DELETE"});(await a.json()).success&&(t(e.filter(e=>e._id!==s)),p.ZP.success("Lead deleted successfully"))}catch(e){p.ZP.error("Failed to delete lead")}},N=e.filter(e=>{let t=e.name.toLowerCase().includes(f.toLowerCase())||e.email.toLowerCase().includes(f.toLowerCase())||e.subject.toLowerCase().includes(f.toLowerCase()),s="all"===g||e.status===g;return t&&s}),k=e=>{switch(e){case"new":return"bg-blue-100 text-blue-800 border-blue-200";case"read":default:return"bg-gray-100 text-gray-800 border-gray-200";case"contacted":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-amber-100 text-amber-800 border-amber-200"}};return s?(0,a.jsxs)("div",{className:"h-96 flex flex-col items-center justify-center gap-4",children:[(0,a.jsx)(n.Z,{className:"h-10 w-10 text-primary animate-spin"}),(0,a.jsx)("p",{className:"text-primary/40 font-black uppercase tracking-widest text-xs",children:"Synchronizing Inquiries..."})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-black text-primary-dark tracking-tight",children:"Lead Repository"}),(0,a.jsx)("p",{className:"text-primary/60 font-medium mt-1",children:"Monitor and manage institutional inquiries and contact requests."})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-primary/40"}),(0,a.jsx)("input",{type:"text",placeholder:"Search names, emails...",value:f,onChange:e=>y(e.target.value),className:"pl-10 pr-4 py-2.5 bg-white border border-primary/10 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none text-sm w-full sm:w-64"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-primary/40"}),(0,a.jsxs)("select",{value:g,onChange:e=>j(e.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-primary/10 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none text-sm appearance-none leading-tight",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"new",children:"New"}),(0,a.jsx)("option",{value:"read",children:"Read"}),(0,a.jsx)("option",{value:"contacted",children:"Contacted"}),(0,a.jsx)("option",{value:"archived",children:"Archived"})]})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-[2.5rem] shadow-xl shadow-primary/5 border border-primary/5 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-primary/5 border-b border-primary/10",children:[(0,a.jsx)("th",{className:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-primary/40",children:"Respondent"}),(0,a.jsx)("th",{className:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-primary/40",children:"Inquiry Details"}),(0,a.jsx)("th",{className:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-primary/40",children:"Submission Date"}),(0,a.jsx)("th",{className:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-primary/40 text-right",children:"Operations"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-primary/5",children:[(0,a.jsx)(x.M,{mode:"popLayout",children:N.map(e=>(0,a.jsxs)(h.E.tr,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-primary/[0.02] transition-colors group",children:[(0,a.jsx)("td",{className:"px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-black text-xs",children:e.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-primary-dark",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-primary/50 font-medium",children:e.email})]})]})}),(0,a.jsxs)("td",{className:"px-8 py-6 max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-black uppercase border ".concat(k(e.status)),children:e.status}),(0,a.jsx)("p",{className:"font-bold text-sm text-primary-dark line-clamp-1",children:e.subject})]}),(0,a.jsx)("p",{className:"text-xs text-primary/60 line-clamp-2 leading-relaxed",children:e.message})]}),(0,a.jsx)("td",{className:"px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-primary/40 font-medium",children:[(0,a.jsx)(c,{className:"h-3 w-3"}),new Date(e.createdAt).toLocaleDateString()]})}),(0,a.jsx)("td",{className:"px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:["new"===e.status&&(0,a.jsx)("button",{onClick:()=>w(e._id,"read"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Mark as Read",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})}),"read"===e.status&&(0,a.jsx)("button",{onClick:()=>w(e._id,"contacted"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Mark as Contacted",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>v(e._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Lead",children:(0,a.jsx)(d.Z,{className:"h-5 w-5"})})]})})]},e._id))}),0===N.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"4",className:"px-8 py-20 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 opacity-20",children:[(0,a.jsx)(u.Z,{className:"h-12 w-12"}),(0,a.jsx)("p",{className:"font-black uppercase tracking-widest text-xs text-primary",children:"No communications found"})]})})})]})]})})})]})}},8614:function(e,t,s){"use strict";s.d(t,{M:function(){return y}});var a=s(7437),r=s(2265),n=s(8881),i=s(3576),l=s(4252),c=s(4664);class o extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:s}=e,n=(0,r.useId)(),i=(0,r.useRef)(null),l=(0,r.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,r.useContext)(c._);return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:r}=l.current;if(s||!i.current||!e||!t)return;i.current.dataset.motionPopId=n;let c=document.createElement("style");return d&&(c.nonce=d),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(a,"px !important;\n            left: ").concat(r,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[s]),(0,a.jsx)(o,{isPresent:s,childRef:i,sizeRef:l,children:r.cloneElement(t,{ref:i})})}let u=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:c,custom:o,presenceAffectsLayout:u,mode:x}=e,h=(0,i.h)(p),m=(0,r.useId)(),f=(0,r.useCallback)(e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;c&&c()},[h,c]),y=(0,r.useMemo)(()=>({id:m,initial:s,isPresent:n,custom:o,onExitComplete:f,register:e=>(h.set(e,!1),()=>h.delete(e))}),u?[Math.random(),f]:[n,f]);return(0,r.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[n]),r.useEffect(()=>{n||h.size||!c||c()},[n]),"popLayout"===x&&(t=(0,a.jsx)(d,{isPresent:n,children:t})),(0,a.jsx)(l.O.Provider,{value:y,children:t})};function p(){return new Map}var x=s(9637);let h=e=>e.key||"";function m(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}var f=s(1534);let y=e=>{let{children:t,custom:s,initial:l=!0,onExitComplete:c,presenceAffectsLayout:o=!0,mode:d="sync",propagate:p=!1}=e,[y,g]=(0,x.oO)(p),j=(0,r.useMemo)(()=>m(t),[t]),b=p&&!y?[]:j.map(h),w=(0,r.useRef)(!0),v=(0,r.useRef)(j),N=(0,i.h)(()=>new Map),[k,C]=(0,r.useState)(j),[Z,L]=(0,r.useState)(j);(0,f.L)(()=>{w.current=!1,v.current=j;for(let e=0;e<Z.length;e++){let t=h(Z[e]);b.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[Z,b.length,b.join("-")]);let E=[];if(j!==k){let e=[...j];for(let t=0;t<Z.length;t++){let s=Z[t],a=h(s);b.includes(a)||(e.splice(t,0,s),E.push(s))}"wait"===d&&E.length&&(e=E),L(m(e)),C(j);return}let{forceRender:M}=(0,r.useContext)(n.p);return(0,a.jsx)(a.Fragment,{children:Z.map(e=>{let t=h(e),r=(!p||!!y)&&(j===Z||b.includes(t));return(0,a.jsx)(u,{isPresent:r,initial:(!w.current||!!l)&&void 0,custom:r?void 0:s,presenceAffectsLayout:o,mode:d,onExitComplete:r?void 0:()=>{if(!N.has(t))return;N.set(t,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(null==M||M(),L(v.current),p&&(null==g||g()),c&&c())},children:e},t)})})}}},function(e){e.O(0,[521,765,971,117,744],function(){return e(e.s=5864)}),_N_E=e.O()}]);