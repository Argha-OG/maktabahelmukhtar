(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8880:function(e,t,a){Promise.resolve().then(a.bind(a,8037))},8037:function(e,t,a){"use strict";a.d(t,{default:function(){return Z}});var s=a(7437),r=a(2265),l=a(4681),i=a(2660),n=a(407),c=a(6595),o=a(9554),d=a(9397),x=a(4743),m=a(6275),p=a(3417),h=a(8919),u=a(1671),b=a(2720),f=a(9202),g=a(44),y=a(1769),j=a(6858),w=a(2489),N=a(3476),v=a(521),k=a(8614),_=a(8706),C=a(6285);let S="60195328616";function Z(e){let{id:t}=e,a=(0,_.T)("Books"),[Z,E]=(0,r.useState)(null),[R,D]=(0,r.useState)([]),[M,A]=(0,r.useState)(!0),[I,B]=(0,r.useState)(!1),[O,q]=(0,r.useState)(1),[P,U]=(0,r.useState)(!1),{addToCart:T}=(0,l.j)();(0,N.tv)(),(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/books/".concat(t)),a=await e.json();if(a.success){E(a.data);let e=await fetch("/api/books"),s=await e.json();if(s.success){let e=s.data.filter(e=>e.category===a.data.category&&e._id!==t).slice(0,4);D(e)}}A(!1)}catch(e){console.error("Error fetching book details:",e),A(!1)}})();let e=()=>B(window.scrollY>400);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[t]);let z=Z?(Z.price*O).toFixed(2):0,W=()=>"Assalam Admin,\n\n\uD83D\uDCDA *Pesanan Buku:*\n"+"Tajuk: ".concat(Z.title,"\n")+"Penulis: ".concat(Z.author,"\n")+"Kuantiti: ".concat(O," buah\n")+"Harga Seunit: RM ".concat(Z.price,"\n")+"*Jumlah: RM ".concat(z,"*\n\n")+"âœ… Saya telah membuat bayaran dan akan menghantar resit segera.\n\nSila sahkan pesanan saya. Terima kasih!",Q=()=>U(!0);return M?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):Z?(0,s.jsxs)("div",{className:"min-h-screen pb-20 pt-8",children:[(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-primary/50 mb-12",children:[(0,s.jsx)(N.rU,{href:"/",className:"hover:text-primary transition-colors",children:a("title")}),(0,s.jsx)(n.Z,{className:"h-3 w-3"}),(0,s.jsx)(N.rU,{href:"/books",className:"hover:text-primary transition-colors",children:a("catalog")}),(0,s.jsx)(n.Z,{className:"h-3 w-3"}),(0,s.jsx)("span",{className:"text-primary font-medium truncate max-w-[200px]",children:Z.title})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-16",children:[(0,s.jsx)(v.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-5",children:(0,s.jsx)("div",{className:"glass-card p-4 sticky top-32",children:(0,s.jsx)("div",{className:"aspect-[3/4] relative overflow-hidden rounded-xl shadow-2xl",children:(0,s.jsx)("img",{src:Z.coverImage,alt:Z.title,className:"w-full h-full object-cover"})})})}),(0,s.jsxs)(v.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"lg:col-span-7",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("div",{className:"bg-primary/20 text-primary-dark text-[10px] font-bold px-4 py-1 uppercase tracking-[0.2em] flex items-center justify-center text-center",style:{clipPath:"polygon(0% 15%, 15% 15%, 15% 0%, 85% 0%, 85% 15%, 100% 15%, 100% 85%, 85% 85%, 85% 100%, 15% 100%, 15% 85%, 0% 85%)",minWidth:"100px",paddingTop:"12px",paddingBottom:"12px"},children:Z.category}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-yellow-500 ml-2",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 fill-current"}),(0,s.jsx)("span",{className:"text-sm font-bold text-primary-dark",children:"4.9"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-8 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary-dark mb-2 leading-tight",children:Z.title}),(0,s.jsxs)("p",{className:"text-xl text-primary/60 italic",children:["By ",Z.author]})]}),(0,s.jsxs)("div",{className:"bg-primary shadow-2xl shadow-primary/20 p-6 rounded-3xl text-white min-w-[180px] text-center transform hover:scale-105 transition-transform",children:[(0,s.jsx)("span",{className:"block text-[10px] font-black uppercase tracking-[0.2em] mb-1 opacity-60",children:a("institutional_price")}),(0,s.jsxs)("span",{className:"text-4xl font-black",children:["RM ",Z.price||"0"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("span",{className:"text-sm font-black uppercase tracking-widest text-primary/50",children:"Quantity:"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 bg-primary/5 rounded-2xl px-4 py-2 border border-primary/10",children:[(0,s.jsx)("button",{onClick:()=>q(e=>Math.max(1,e-1)),className:"p-1 rounded-lg hover:bg-primary/10 transition-colors text-primary",children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"text-xl font-black text-primary-dark w-8 text-center",children:O}),(0,s.jsx)("button",{onClick:()=>q(e=>e+1),className:"p-1 rounded-lg hover:bg-primary/10 transition-colors text-primary",children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("span",{className:"text-lg font-black text-primary-dark",children:["Total: ",(0,s.jsxs)("span",{className:"text-primary",children:["RM ",z]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center mb-12",children:[(0,s.jsxs)("button",{onClick:Q,className:"btn-premium bg-green-600 text-white hover:bg-green-700 px-10 py-4 shadow-xl shadow-green-600/30 flex items-center gap-3 text-lg flex-1 md:flex-none",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5"})," Order Now"]}),(0,s.jsxs)("button",{onClick:()=>T({...Z,quantity:O}),className:"btn-premium bg-primary text-white hover:bg-primary-dark px-10 py-4 shadow-xl shadow-primary/30 flex items-center gap-3 text-lg flex-1 md:flex-none",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5"})," ",a("add_to_cart")]}),(0,s.jsxs)("a",{href:"https://wa.me/".concat(S,"?text=").concat(encodeURIComponent("Assalam Admin, saya ingin bertanya tentang buku: ".concat(Z.title))),target:"_blank",rel:"noopener noreferrer",className:"btn-premium bg-white/50 backdrop-blur-md border border-primary/10 text-primary hover:bg-white/80 px-10 py-4 flex items-center gap-3 text-lg flex-1 md:flex-none",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5"})," ",a("ask_whatsapp")]}),(0,s.jsx)("button",{className:"p-4 rounded-full glass-card hover:bg-primary/5 transition-colors border-primary/5",children:(0,s.jsx)(h.Z,{className:"h-5 w-5 text-primary"})})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 py-10 border-y border-primary/5 mb-12 bg-white/20 rounded-3xl px-6",children:[{icon:u.Z,label:a("status_label"),value:a("status_available"),color:"text-green-500"},{icon:b.Z,label:a("type_label"),value:a("type_paperback"),color:"text-primary"},{icon:f.Z,label:a("language_label"),value:a("language_value"),color:"text-primary"},{icon:g.Z,label:a("publisher_label"),value:a("publisher_value"),color:"text-primary"}].map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-white/50 mb-2 ".concat(e.color),children:(0,s.jsx)(e.icon,{className:"h-4 w-4"})}),(0,s.jsx)("p",{className:"text-[10px] text-primary/40 uppercase font-bold tracking-widest mb-1",children:e.label}),(0,s.jsx)("p",{className:"text-xs font-bold text-primary-dark",children:e.value})]},t))})]})]}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-24 mt-32",children:[(0,s.jsxs)(v.E.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-10",children:[(0,s.jsx)("div",{className:"h-px bg-primary/10 flex-grow"}),(0,s.jsxs)("h2",{className:"text-3xl font-bold text-primary-dark flex items-center gap-3 px-6 whitespace-nowrap",children:[(0,s.jsx)(y.Z,{className:"h-8 w-8 text-primary"}),a("synopsis_title")]}),(0,s.jsx)("div",{className:"h-px bg-primary/10 flex-grow"})]}),(0,s.jsxs)("div",{className:"glass-card p-10 md:p-20 border-primary/5 relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-80 h-80 bg-primary/5 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl transition-transform group-hover:scale-110 duration-700"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-primary/5 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),(0,s.jsx)("p",{className:"text-xl text-primary/70 leading-[1.8] whitespace-pre-line relative z-10 font-medium",children:Z.description})]})]}),(0,s.jsxs)(v.E.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-10",children:[(0,s.jsx)("div",{className:"h-px bg-primary/10 flex-grow"}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-primary-dark px-6",children:a("about_author")}),(0,s.jsx)("div",{className:"h-px bg-primary/10 flex-grow"})]}),(0,s.jsxs)("div",{className:"glass-card p-10 md:p-14 border-primary/5 flex flex-col md:flex-row gap-16 items-center md:items-start bg-white/40 group",children:[(0,s.jsxs)("div",{className:"w-56 h-56 md:w-72 md:h-72 flex-shrink-0 relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-primary/10 rounded-[2.5rem] rotate-6 scale-105 group-hover:rotate-12 transition-transform duration-500"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-primary/5 rounded-[2.5rem] -rotate-3 scale-110 group-hover:-rotate-6 transition-transform duration-500 delay-75"}),(0,s.jsx)("img",{src:Z.authorImage||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=400",alt:Z.author,className:"w-full h-full object-cover rounded-[2.5rem] relative z-10 shadow-2xl grayscale-[20%] group-hover:grayscale-0 transition-all duration-300"})]}),(0,s.jsxs)("div",{className:"flex-grow text-center md:text-left pt-6",children:[(0,s.jsx)("h3",{className:"text-4xl font-bold text-primary-dark mb-3",children:Z.author}),(0,s.jsxs)("p",{className:"text-primary font-extrabold uppercase tracking-[0.2em] text-sm mb-8 flex items-center justify-center md:justify-start gap-3",children:[(0,s.jsx)("span",{className:"w-8 h-px bg-primary/30"}),a("author_role")]}),(0,s.jsx)("p",{className:"text-xl text-primary/70 leading-relaxed italic border-l-4 border-primary/10 pl-8 ml-2",children:Z.authorBio||"Sheikh ".concat(Z.author," is a distinguished scholar at Maktabah El Mukhtar, specializing in the meticulous preservation and dissemination of authentic Islamic literature.")})]})]})]})]}),R.length>0&&(0,s.jsxs)("section",{className:"mt-32 pb-20",children:[(0,s.jsxs)("div",{className:"flex items-end justify-between mb-12",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-primary-dark mb-2",children:a("related_title")}),(0,s.jsx)("p",{className:"text-primary/50 font-medium",children:a("related_subtitle",{category:Z.category})})]}),(0,s.jsxs)(N.rU,{href:"/books",className:"text-primary font-bold flex items-center gap-2 hover:gap-3 transition-all group",children:[a("view_all")," ",(0,s.jsx)(j.Z,{className:"h-5 w-5"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:R.map(e=>(0,s.jsx)(v.E.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},children:(0,s.jsx)(C.Z,{book:e})},e._id))})]})]}),(0,s.jsx)(k.M,{children:I&&(0,s.jsxs)(v.E.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-2xl border-t border-primary/10 p-4 z-40 lg:hidden flex gap-3 shadow-[0_-10px_40px_rgba(0,0,0,0.1)]",children:[(0,s.jsxs)("button",{onClick:Q,className:"flex-1 bg-green-600 text-white font-bold py-4 rounded-2xl shadow-xl shadow-green-600/20 flex items-center justify-center gap-2",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5"})," Order Now"]}),(0,s.jsxs)("button",{onClick:()=>T(Z),className:"flex-1 bg-primary text-white font-bold py-4 rounded-2xl shadow-xl shadow-primary/20 flex items-center justify-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5"})," ",a("add_to_cart")]})]})}),(0,s.jsx)(k.M,{children:P&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)(v.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>U(!1),className:"absolute inset-0 bg-primary-dark/70 backdrop-blur-sm"}),(0,s.jsxs)(v.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-3xl w-full max-w-lg relative z-10 shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"bg-primary p-6 text-white flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-black",children:"Order Confirmation"}),(0,s.jsx)("p",{className:"text-white/70 text-sm mt-1",children:"Complete your payment below"})]}),(0,s.jsx)("button",{onClick:()=>U(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:(0,s.jsx)(w.Z,{className:"h-6 w-6"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-primary/5 rounded-2xl p-4 border border-primary/10",children:[(0,s.jsx)("h3",{className:"font-black text-xs uppercase tracking-widest text-primary/50 mb-3",children:"Order Summary"}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("img",{src:Z.coverImage,alt:Z.title,className:"w-12 h-16 object-cover rounded-lg shadow"}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("p",{className:"font-black text-primary-dark",children:Z.title}),(0,s.jsxs)("p",{className:"text-sm text-primary/60",children:["By ",Z.author]}),(0,s.jsxs)("p",{className:"text-sm text-primary/60 mt-1",children:["Qty: ",O," \xd7 RM ",Z.price]})]}),(0,s.jsxs)("p",{className:"font-black text-xl text-primary whitespace-nowrap",children:["RM ",z]})]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"font-black text-xs uppercase tracking-widest text-primary/50 mb-3",children:"Scan to Pay"}),(0,s.jsx)("div",{className:"inline-block bg-white rounded-2xl shadow-xl border-4 border-primary/10 p-3",children:(0,s.jsx)("img",{src:"/qr.jpeg",alt:"Payment QR Code",className:"w-48 h-48 object-contain rounded-xl mx-auto"})}),(0,s.jsxs)("p",{className:"text-2xl font-black text-primary mt-3",children:["RM ",z]}),(0,s.jsx)("p",{className:"text-sm text-primary/50 font-medium",children:"Scan QR with any banking app or e-wallet"})]}),(0,s.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 space-y-2",children:[(0,s.jsx)("h3",{className:"font-black text-amber-800 text-sm uppercase tracking-wider",children:"\uD83D\uDCCB Payment Instructions"}),(0,s.jsxs)("ol",{className:"text-sm text-amber-700 space-y-1.5 list-decimal list-inside font-medium",children:[(0,s.jsxs)("li",{children:["Scan the QR code and pay ",(0,s.jsxs)("strong",{children:["RM ",z]})]}),(0,s.jsxs)("li",{children:["Take a ",(0,s.jsx)("strong",{children:"screenshot"})," of your payment receipt"]}),(0,s.jsxs)("li",{children:["Click ",(0,s.jsx)("strong",{children:'"Send Order via WhatsApp"'})," below"]}),(0,s.jsx)("li",{children:"Attach the receipt screenshot in the WhatsApp chat"}),(0,s.jsx)("li",{children:"We will confirm your order and arrange delivery"})]})]}),(0,s.jsxs)("button",{onClick:()=>{let e=W();window.open("https://wa.me/".concat(S,"?text=").concat(encodeURIComponent(e)),"_blank")},className:"w-full bg-green-600 text-white py-4 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-green-700 transition-colors shadow-xl shadow-green-600/20 flex items-center justify-center gap-3",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5"}),"Send Order via WhatsApp"]}),(0,s.jsx)("p",{className:"text-center text-xs text-primary/40 font-medium",children:"Your order details (book name, quantity, price) will be pre-filled in WhatsApp"})]})]})]})})]}):(0,s.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:a("no_results")}),(0,s.jsxs)(N.rU,{href:"/books",className:"text-primary hover:underline flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"})," ",a("view_all")]})]})}},6285:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var s=a(7437),r=a(521),l=a(6275),i=a(3417),n=a(3476),c=a(8706),o=a(4681);function d(e){let{book:t}=e,a=(0,c.T)("Books"),{addToCart:d}=(0,o.j)();return(0,s.jsxs)(r.E.div,{whileHover:{y:-4},className:"book-card bg-white rounded-lg border border-gray-200 overflow-hidden flex flex-col h-full hover:shadow-lg transition-all group/card",children:[(0,s.jsxs)("div",{className:"relative aspect-[3/4] bg-slate-100 overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-[#f4f1ea] text-[#8c8c8c]",children:(0,s.jsx)(n.rU,{href:"/books/".concat(t._id),className:"w-full h-full block",children:(0,s.jsx)("img",{src:t.coverImage,alt:t.title,className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-500 cursor-pointer"})})}),t.isBestSeller&&(0,s.jsx)("div",{className:"absolute top-3 left-3 bg-gold-500 text-white text-xs font-bold px-2 py-1 rounded shadow-sm z-10",children:"TERLARIS"}),(0,s.jsx)("div",{onClick:()=>d(t),className:"absolute bottom-4 right-4 bg-white/90 backdrop-blur rounded-full w-10 h-10 flex items-center justify-center shadow-lg cursor-pointer hover:bg-gold-500 hover:text-white transition-colors z-20",title:a("add_to_cart"),children:(0,s.jsx)(l.Z,{className:"text-scholarly-blue-950 w-5 h-5 group-hover/card:text-scholarly-blue-950 transition-colors"})})]}),(0,s.jsxs)("div",{className:"p-5 flex flex-col flex-grow",children:[t.category&&(0,s.jsx)("div",{className:"mb-1 text-xs text-scholarly-blue-900 font-semibold uppercase tracking-wide",children:t.category}),(0,s.jsx)(n.rU,{href:"/books/".concat(t._id),children:(0,s.jsx)("h3",{className:"font-serif text-xl font-bold text-slate-900 leading-tight mb-2 hover:text-scholarly-blue-900 cursor-pointer line-clamp-2",children:t.title})}),(0,s.jsxs)("p",{className:"text-sm text-slate-500 mb-4 truncate",children:["Oleh ",t.author]}),(0,s.jsx)("div",{className:"mt-auto flex items-end justify-between border-t border-slate-100 pt-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-xs text-slate-400 mb-0.5",children:"Harga"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-slate-900",children:["RM ",t.price?parseFloat(t.price).toFixed(2):"0.00"]})]})}),(0,s.jsxs)("a",{href:"https://wa.me/".concat(t.whatsappLink||"60195328616","?text=").concat(encodeURIComponent("Assalam Admin, saya ingin memesan:\n\uD83D\uDCDA Buku: ".concat(t.title,"\n\uD83D\uDCB0 Harga: RM ").concat(t.price,"\n\nSila konfirmasi."))),target:"_blank",rel:"noopener noreferrer",className:"mt-4 w-full flex items-center justify-center gap-2 bg-[#25D366] hover:bg-[#1da851] text-white py-2.5 rounded-md font-medium text-sm transition-colors shadow-sm",children:[(0,s.jsx)(i.Z,{className:"w-5 h-5"})," Beli di WhatsApp"]})]})]})}},4681:function(e,t,a){"use strict";a.d(t,{CartProvider:function(){return n},j:function(){return i}});var s=a(7437),r=a(2265);let l=(0,r.createContext)(),i=()=>(0,r.useContext)(l),n=e=>{let{children:t}=e,[a,i]=(0,r.useState)([]),[n,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("maktabah_cart");if(e)try{i(JSON.parse(e))}catch(e){console.error("Failed to parse cart",e)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("maktabah_cart",JSON.stringify(a))},[a]);let o=a.reduce((e,t)=>e+(t.price||0)*t.quantity,0),d=a.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(l.Provider,{value:{cart:a,addToCart:e=>{i(t=>t.find(t=>t._id===e._id)?t.map(t=>t._id===e._id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}]),c(!0)},removeFromCart:e=>{i(t=>t.filter(t=>t._id!==e))},updateQuantity:(e,t)=>{i(a=>a.map(a=>{if(a._id===e){let e=Math.max(1,a.quantity+t);return{...a,quantity:e}}return a}))},clearCart:()=>{i([])},cartTotal:o,cartCount:d,isCartOpen:n,setIsCartOpen:c},children:t})}},3476:function(e,t,a){"use strict";a.d(t,{jD:function(){return l},rU:function(){return s},tv:function(){return i}});let{Link:s,redirect:r,usePathname:l,useRouter:i}=(0,a(2223).Z)({locales:["en","ms"],localePrefix:"always"})}},function(e){e.O(0,[234,521,223,658,971,117,744],function(){return e(e.s=8880)}),_N_E=e.O()}]);